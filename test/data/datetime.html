<span class="hljs-comment">// datetime(), offset, durationSince, toDate, toTime</span>
<span class="hljs-comment">// duration(), toMilliseconds, toSeconds, toMinutes, toHours, toDays</span>
<span class="hljs-comment">// see https://github.com/cedar-policy/rfcs/blob/main/text/0080-datetime-extension.md</span>
<span class="hljs-keyword">permit</span> <span class="hljs-punctuation">(</span><span class="hljs-variable">principal</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">action</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">resource</span><span class="hljs-punctuation">)</span>
<span class="hljs-keyword">when</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T00:00:00.000Z&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1d2h3m4s5ms&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toSeconds</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">==</span> <span class="hljs-number">0</span> <span class="hljs-operator">&amp;&amp;</span>
  <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T23:59:59.999Z&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toDate</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span> 
  <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">offset</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1d&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-22T&quot;</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span>
  <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toTime</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">durationSince</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">datetime</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;2024-08-21T&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toDate</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">;</span>

<span class="hljs-keyword">permit</span> <span class="hljs-punctuation">(</span><span class="hljs-variable">principal</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">action</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">resource</span><span class="hljs-punctuation">)</span>
<span class="hljs-keyword">when</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1d&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toDays</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">*</span> <span class="hljs-number">24</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1d&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toHours</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span>
  <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1h&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toHours</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">*</span> <span class="hljs-number">60</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1h&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMinutes</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span>
  <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1m&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMinutes</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">*</span> <span class="hljs-number">60</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1m&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toSeconds</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span>
  <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1s&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toSeconds</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">*</span> <span class="hljs-number">1000</span> <span class="hljs-operator">==</span> <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1s&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMilliseconds</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">&amp;&amp;</span>
  <span class="hljs-built_in">duration</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;1ms&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">.</span><span class="hljs-title function_ invoke__">toMilliseconds</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">==</span> <span class="hljs-number">1</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">;</span>